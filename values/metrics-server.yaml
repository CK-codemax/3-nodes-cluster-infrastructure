---
# Metrics Server Helm chart values
# This configures metrics-server to work with self-managed Kubernetes clusters

# Override default args completely
args:
  - --cert-dir=/tmp
  - --secure-port=4443
  - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
  - --kubelet-use-node-status-port
  - --metric-resolution=15s
  - --kubelet-insecure-tls

# Ensure probes use the correct port (explicit port number instead of named port)
livenessProbe:
  httpGet:
    path: /livez
    port: 4443
    scheme: HTTPS
  failureThreshold: 3
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /readyz
    port: 4443
    scheme: HTTPS
  failureThreshold: 3
  periodSeconds: 10
  initialDelaySeconds: 20
